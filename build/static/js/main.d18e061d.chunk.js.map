{"version":3,"sources":["assets/home2.png","util/constants.js","components/Home.js","util/index.js","util/stor.js","contract/metadata.js","contract/deploy.js","components/FileDropzone/FileDropzone.js","util/ceramic.js","assets/logo.png","components/CreateSalespage.js","util/covalent.js","components/History.js","util/web3util.js","assets/icon.png","util/coins.js","components/Invoice/Invoice.js","util/nftport.js","components/Salespage.js","App.js","reportWebVitals.js","index.js"],"names":["COVALENT_KEY","process","NFT_PORT_KEY","INFURA_ID","APP_NAME","APP_DESC","CONNECT_PROMPT","CHAIN_OPTIONS","name","url","id","ACTIVE_CHAIN","Object","keys","EXAMPLE_FORM","title","paymentAddress","files","console","log","CHECKLIST_ITEMS","Home","account","navigate","useNavigate","className","span","items","map","item","i","CheckCircleTwoTone","twoToneColor","type","size","onClick","src","logo","ipfsUrl","cid","fileName","createItemString","quantity","join","salespageUrl","window","location","origin","capitalize","string","charAt","toUpperCase","slice","replace","abbreviate","s","substr","getDateStringFromTimestamp","ts","showTime","d","Date","toLocaleDateString","toLocaleTimeString","col","k","render","dataIndex","key","WEI_PER_UNIT","Math","pow","bytesToSize","bytes","parseInt","floor","round","isEmpty","length","formatter","Intl","NumberFormat","style","currency","formatMoney","format","API_KEY","makeStorageClient","Web3Storage","token","storeFiles","client","put","fetchMetadata","axios","get","SALESPAGE_CONTRACT","deployContract","provider","signerAddress","factory","ethers","ContractFactory","getSigner","validatedAddress","utils","getAddress","deploy","contract","deployed","address","completePurchase","contractAddress","pageId","amountEth","salespageContract","Contract","itemString","value","parseEther","toString","options","result","thumbsContainer","display","flexDirection","flexWrap","marginTop","thumb","borderRadius","border","marginBottom","marginRight","thumbInner","minWidth","overflow","FileDropzone","setFiles","updateInfo","info","useDropzone","onDrop","acceptedFiles","file","assign","preview","URL","createObjectURL","getRootProps","getInputProps","thumbs","fileInfo","updateFileInfo","addonBefore","placeholder","onChange","e","target","useEffect","forEach","revokeObjectURL","noFiles","image","imageStyle","height","description","ceramic","CeramicClient","resolver","KeyDidResolver","getResolver","ThreeIdResolver","did","DID","threeIdConnect","ThreeIdConnect","initCeramic","authProvider","EthereumAuthProvider","ethereum","connect","getDidProvider","setProvider","authenticate","createStream","data","TileDocument","create","doc","streamId","content","loadStream","load","Step","Steps","CreateSalespage","useState","setData","error","setError","loading","setLoading","setResult","updateData","isValidData","addr","validAddress","isValid","undefined","body","x","res","f","path","blob","Blob","JSON","stringify","metadataFile","File","allFiles","hash","useTx","getExplorerUrl","message","direction","current","prefix","disabled","status","subTitle","extra","href","contractUrl","getTransactions","chainId","Option","Select","History","props","setAddress","setChainId","currentAddress","fetchHistory","alert","currentChain","cols","row","record","_","toLowerCase","align","defaultValue","width","v","cId","dataSource","filter","columns","onRow","rowIndex","event","open","tx_hash","onDoubleClick","onContextMenu","onMouseEnter","onMouseLeave","providerOptions","walletconnect","package","WalletConnectProvider","bridge","infuraId","rpc","getRates","DEMO_NUMBER","now","random","substring","Invoice","storeName","paid","ref","createdAt","logoUrl","pay","invoiceNumber","rates","setRates","total","useMemo","usd","reduce","a","b","fetchRates","amountString","ethString","MATIC","cellPadding","cellSpacing","colSpan","maxWidth","placement","itemName","toFixed","loadImage","config","method","responseType","request","response","createReceiptNft","ownerAddress","imageUrl","params","chain","mint_to_address","formData","FormData","lastModified","append","headers","Authorization","Salespage","login","logout","useParams","cartItems","setCartItems","modifierText","setModifierText","activeItem","setActiveItem","showInvoice","setShowInvoice","fetchData","streamData","completePayment","itemsToPurchase","nftResults","modifyQuantity","amount","imgUrl","pageTitle","activeItems","values","noItems","storeLogo","salespageLogo","InfoCircleOutlined","modifier","cover","alt","actions","MinusCircleFilled","PlusCircleFilled","visible","okText","onCancel","onOk","Header","Layout","Content","Footer","web3Modal","Web3Modal","network","cacheProvider","theme","App","setAccount","checkOnInit","cachedProvider","instance","p","providers","Web3Provider","listAccounts","accounts","clearCachedProvider","isCheckout","pathname","startsWith","mode","defaultSelectedKeys","Item","preventDefault","padding","element","textAlign","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d18e061d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/home2.4c0d795c.png\";","export const COVALENT_KEY = process.env.REACT_APP_COVALENT_KEY; // covalent api key\nexport const NFT_PORT_KEY = process.env.REACT_APP_NFT_PORT_KEY; // nft port key\nexport const INFURA_ID = process.env.REACT_APP_SALESPAGE_INFURA_ID; //Infura ID\n\nexport const APP_NAME = \"Salespage\";\nexport const APP_DESC = \"A Point of Sale platform built on Polygon and IPFS\"\nexport const SALESPAGE_DETAIL = \"A Salespage is a gateway url you can have displayed on tablets or screens in your store or retail space. Customers will be able complete purchases from this page fully self-service.\"\n\nexport const CONNECT_PROMPT = 'Connect Wallet'\n\nexport const CHAIN_OPTIONS = {\n  80001: {\n    name: \"Mumbai\",\n    url: \"https://mumbai.polygonscan.com/\",\n    id: 80001,\n  },\n  137: {\n    name: \"Matic Mainnet\",\n    url: \"https://polygonscan.com/\",\n    id: 137,\n  },\n};\n\nexport const DEMO_ITEMS = [\n  {\n    'name': 'Burrito',\n    'usd': '8.99',\n    'modifier': 'add cheese'\n  },\n  {\n    'name': 'Chips',\n    'usd': '1.99',\n    'modifier': ''\n  },\n  {\n    'name': 'Soda',\n    'usd': '1.99',\n    'modifier': ''\n  },\n]\n\nexport const CHAIN_IDS = Object.keys(CHAIN_OPTIONS)\n\n// 1: { name: \"ethereum\", url: \"https://etherscan.io/tx/\", id: 1 },\n// 42: { name: \"kovan\", url: \"https://kovan.etherscan.io/tx/\", id: 42 },\n// 4: { name: \"rinkeby\", url: \"https://rinkeby.etherscan.io/tx/\", id: 4 },\n\nexport const ACTIVE_CHAIN = CHAIN_OPTIONS[\"80001\"];\n\nexport const EXAMPLE_FORM = {\n  title: \"My restaurant\",\n  paymentAddress: \"0xD7e02fB8A60E78071D69ded9Eb1b89E372EE2292\",\n  files: [],\n};\n\nexport const IPFS_BASE_URL = \"https://ipfs.io/ipfs\"\n\nconsole.log(\"config\", INFURA_ID, COVALENT_KEY, NFT_PORT_KEY, ACTIVE_CHAIN);\n","import React from \"react\";\nimport { Row, Col, Button } from \"antd\";\nimport logo from \"../assets/home2.png\";\nimport ReactRotatingText from \"react-rotating-text\";\nimport { useNavigate } from \"react-router-dom\";\nimport { APP_DESC, APP_NAME, CONNECT_PROMPT } from \"../util/constants\";\nimport { CheckCircleOutlined, CheckCircleTwoTone } from \"@ant-design/icons\";\n\n\nconst CHECKLIST_ITEMS = [\n  \"Create instant point of sale pages with no minimum fees.\",\n  \"Each page is managed by its own dedicated smart contract.\",\n  \"Every receipt generated as an NFT.\",\n];\n\nfunction Home({account}) {\n  const navigate = useNavigate();\n\n  const goToCreate = () => {\n    navigate(\"/create\");\n  };\n\n  return (\n    <div className=\"hero-section\">\n      <Row>\n        <Col span={12}>\n          <div className=\"hero-slogan-section\">\n            <div className=\"hero-slogan\">\n              <p>\n                {APP_DESC} for&nbsp;\n                <ReactRotatingText\n                  items={[\"businesses\", \"restaurants\", \"retail\"]}\n                />\n                .\n              </p>\n            </div>\n            {/* // \"#eb2f96\" */}\n            {CHECKLIST_ITEMS.map((item, i) => {\n              return (\n                <p>\n                  <CheckCircleTwoTone twoToneColor=\"#00aa00\" />\n                  &nbsp;\n                  {item}\n                </p>\n              );\n            })}\n            <br />\n\n            <Button type=\"primary\" size=\"large\" onClick={goToCreate}>\n              {account ? 'Create salespage request' : CONNECT_PROMPT}\n            </Button>\n          </div>\n        </Col>\n        <Col span={12}>\n          <div className=\"centered\">\n          <img src={logo} className=\"hero-image\" />\n          <p><i>An example checkout page dynamically created by {APP_NAME}.</i></p>\n        </div>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nHome.propTypes = {};\n\nexport default Home;\n","import { ACTIVE_CHAIN, IPFS_BASE_URL } from \"./constants\";\n\nexport const ipfsUrl = (cid, fileName) => {\n  // let url = `https://ipfs.io/ipfs/${cid}`;\n  let url = `${IPFS_BASE_URL}/${cid}`;\n  if (fileName) {\n    return `${url}/${fileName}`;\n  }\n  return url;\n};\n\nexport const createItemString = (items) => {\n  return items.map(item => `${item.name}x${item.quantity || 1}`).join(', ')\n}\n\nexport const salespageUrl = (cid) => `${window.location.origin}/page/${cid}`;\n\nexport function capitalize(string) {\n  return (string.charAt(0).toUpperCase() + string.slice(1)).replace('_', ' ')\n}\n\nexport const abbreviate = s => s ? `${s.substr(0, 6)}**` : ''\n\nexport const getExplorerUrl = (hash, useTx) =>\n  `${ACTIVE_CHAIN.url}${useTx ? \"tx/\" : \"address/\"}${hash}`;\n\nexport const createJsonFile = (signload, fileName) => {\n  const st = JSON.stringify(signload);\n  const blob = new Blob([st], { type: \"application/json\" });\n  const fileData = new File([blob], fileName);\n  return fileData;\n};\n\nexport const getDateStringFromTimestamp = (ts, showTime) => {\n  const d = new Date(ts);\n  if (showTime) {\n    return `${d.toLocaleDateString()} ${d.toLocaleTimeString()}`;\n  }\n  return d.toLocaleDateString();\n};\n\nexport const col = (k, render) => ({\n  title: capitalize(k),\n  dataIndex: k,\n  key: k,\n  render,\n});\n\nconst WEI_PER_UNIT=Math.pow(10,18)\n\nexport const getHistoryColumns = (currentAddress) => {\n  return [\n    col(\"type\", (row, record, _) => {\n      console.log('rec', record)\n      return record['to_address']?.toLowerCase() === currentAddress?.toLowerCase() ? 'Inbound (Revenue)' : 'Outbound (Deduction)'\n    }),\n    col(\"tx_hash\", (row) => abbreviate(row)),\n    col(\"from_address\", (row) => abbreviate(row)),\n    col(\"value\", row => row/WEI_PER_UNIT),\n    col(\"block_signed_at\",\n      (row) =>\n        `${new Date(row).toLocaleDateString()} ${new Date(\n          row\n        ).toLocaleTimeString()}`\n    ),\n  ]\n};\n\n\nexport function bytesToSize(bytes) {\n  var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n  if (bytes == 0) return \"0 Byte\";\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n}\n\nexport const isEmpty = s => !s || s.length === 0\n\nconst formatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  // These options are needed to round to whole numbers if that's what you want.\n  //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n  //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});\n\nexport function formatMoney(s) {\n  if (!s) {\n    return 'Free'\n  }\n\n  return formatter.format(s)\n}\n","// import { Web3Storage } from \"web3.storage\";\nimport axios from \"axios\";\nimport { Web3Storage } from \"web3.storage/dist/bundle.esm.min.js\"; // webpack 4\n\nconst API_KEY = process.env.REACT_APP_STORAGE_KEY;\nif (!API_KEY) {\n  alert('REACT_APP_STORAGE_KEY environment variable is required')\n}\n\nfunction getAccessToken() {\n  return API_KEY;\n}\n\nfunction makeStorageClient() {\n  return new Web3Storage({ token: getAccessToken() });\n}\n\nexport const ipfsUrl = (cid, fileName) => {\n    let url = `https://ipfs.io/ipfs/${cid}`;\n    if (fileName) {\n      return `${url}/${fileName}`;\n    }\n    return url;\n  };\n\n\nexport async function storeFiles(files) {\n  console.log('store', files)\n  const client = makeStorageClient();\n  const cid = await client.put(files);\n  console.log(\"stored files with cid:\", cid);\n  return cid;\n}\n\nexport function fetchMetadata(cid) {\n  const url = `${ipfsUrl(cid)}/metadata.json`\n  return axios.get(url)\n}\n\nexport async function retrieveFiles(cid) {\n  const client = makeStorageClient();\n  const res = await client.get(cid);\n  console.log(`Got a response! [${res.status}] ${res.statusText}`);\n  if (!res.ok) {\n    throw new Error(`failed to get ${cid}`);\n  }\n\n  // request succeeded! do something with the response object here...\n\n  return res;\n}\n","export const SALESPAGE_CONTRACT = {\n  \"_format\": \"hh-sol-artifact-1\",\n  \"contractName\": \"Salespage\",\n  \"sourceName\": \"contracts/Salespage.sol\",\n  \"abi\": [\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_title\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"_paymentAddress\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"previousOwner\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"newOwner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"OwnershipTransferred\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": false,\n          \"internalType\": \"address\",\n          \"name\": \"payer\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"amount\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"string\",\n          \"name\": \"items\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"PurchaseCompleted\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_items\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"completePurchase\",\n      \"outputs\": [],\n      \"stateMutability\": \"payable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getTitle\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"owner\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"renounceOwnership\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"_paymentAddress\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"setPaymentAddress\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"toggleOpen\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"newOwner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"transferOwnership\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }\n  ],\n  \"bytecode\": \"0x60806040523480156200001157600080fd5b506040516200147e3803806200147e8339818101604052810190620000379190620003d8565b620000576200004b6200010460201b60201c565b6200010c60201b60201c565b620000876040518060600160405280602a815260200162001454602a913983620001d060201b620006661760201c565b81600190805190602001906200009f9291906200029f565b5080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600260146101000a81548160ff021916908315150217905550505062000688565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b620002728282604051602401620001e992919062000473565b6040516020818303038152906040527f4b5c4277000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506200027660201b60201c565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b828054620002ad9062000593565b90600052602060002090601f016020900481019282620002d157600085556200031d565b82601f10620002ec57805160ff19168380011785556200031d565b828001600101855582156200031d579182015b828111156200031c578251825591602001919060010190620002ff565b5b5090506200032c919062000330565b5090565b5b808211156200034b57600081600090555060010162000331565b5090565b6000620003666200036084620004d7565b620004ae565b9050828152602081018484840111156200037f57600080fd5b6200038c8482856200055d565b509392505050565b600081519050620003a5816200066e565b92915050565b600082601f830112620003bd57600080fd5b8151620003cf8482602086016200034f565b91505092915050565b60008060408385031215620003ec57600080fd5b600083015167ffffffffffffffff8111156200040757600080fd5b6200041585828601620003ab565b9250506020620004288582860162000394565b9150509250929050565b60006200043f826200050d565b6200044b818562000518565b93506200045d8185602086016200055d565b62000468816200065d565b840191505092915050565b600060408201905081810360008301526200048f818562000432565b90508181036020830152620004a5818462000432565b90509392505050565b6000620004ba620004cd565b9050620004c88282620005c9565b919050565b6000604051905090565b600067ffffffffffffffff821115620004f557620004f46200062e565b5b62000500826200065d565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b600062000536826200053d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60005b838110156200057d57808201518184015260208101905062000560565b838111156200058d576000848401525b50505050565b60006002820490506001821680620005ac57607f821691505b60208210811415620005c357620005c2620005ff565b5b50919050565b620005d4826200065d565b810181811067ffffffffffffffff82111715620005f657620005f56200062e565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b620006798162000529565b81146200068557600080fd5b50565b610dbc80620006986000396000f3fe6080604052600436106100705760003560e01c80638da5cb5b1161004e5780638da5cb5b146100e5578063a7b7229414610110578063f2fde38b1461013b578063ff3c1a8f1461016457610070565b80635e1e100414610075578063715018a6146100b25780637bea1b78146100c9575b600080fd5b34801561008157600080fd5b5061009c60048036038101906100979190610874565b61018f565b6040516100a991906109ad565b60405180910390f35b3480156100be57600080fd5b506100c7610278565b005b6100e360048036038101906100de919061089d565b610300565b005b3480156100f157600080fd5b506100fa6103f6565b60405161010791906109ad565b60405180910390f35b34801561011c57600080fd5b5061012561041f565b6040516101329190610a06565b60405180910390f35b34801561014757600080fd5b50610162600480360381019061015d9190610874565b6104dc565b005b34801561017057600080fd5b506101796105d4565b6040516101869190610a21565b60405180910390f35b6000610199610702565b73ffffffffffffffffffffffffffffffffffffffff166101b76103f6565b73ffffffffffffffffffffffffffffffffffffffff161461020d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161020490610aba565b60405180910390fd5b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b610280610702565b73ffffffffffffffffffffffffffffffffffffffff1661029e6103f6565b73ffffffffffffffffffffffffffffffffffffffff16146102f4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102eb90610aba565b60405180910390fd5b6102fe600061070a565b565b600260149054906101000a900460ff1661034f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161034690610a9a565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f193505050501580156103b7573d6000803e3d6000fd5b507fb9037037fccac7d3b578a7164261dca7897caac8c04cc5ebd5063ffec69fe6a13334836040516103eb939291906109c8565b60405180910390a150565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000610429610702565b73ffffffffffffffffffffffffffffffffffffffff166104476103f6565b73ffffffffffffffffffffffffffffffffffffffff161461049d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161049490610aba565b60405180910390fd5b600260149054906101000a900460ff1615600260146101000a81548160ff021916908315150217905550600260149054906101000a900460ff16905090565b6104e4610702565b73ffffffffffffffffffffffffffffffffffffffff166105026103f6565b73ffffffffffffffffffffffffffffffffffffffff1614610558576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054f90610aba565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156105c8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105bf90610a7a565b60405180910390fd5b6105d18161070a565b50565b6060600180546105e390610bd6565b80601f016020809104026020016040519081016040528092919081815260200182805461060f90610bd6565b801561065c5780601f106106315761010080835404028352916020019161065c565b820191906000526020600020905b81548152906001019060200180831161063f57829003601f168201915b5050505050905090565b6106fe828260405160240161067c929190610a43565b6040516020818303038152906040527f4b5c4277000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506107ce565b5050565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b600061080a61080584610aff565b610ada565b90508281526020810184848401111561082257600080fd5b61082d848285610b94565b509392505050565b60008135905061084481610d6f565b92915050565b600082601f83011261085b57600080fd5b813561086b8482602086016107f7565b91505092915050565b60006020828403121561088657600080fd5b600061089484828501610835565b91505092915050565b6000602082840312156108af57600080fd5b600082013567ffffffffffffffff8111156108c957600080fd5b6108d58482850161084a565b91505092915050565b6108e781610b4c565b82525050565b6108f681610b5e565b82525050565b600061090782610b30565b6109118185610b3b565b9350610921818560208601610ba3565b61092a81610c97565b840191505092915050565b6000610942602683610b3b565b915061094d82610ca8565b604082019050919050565b6000610965602883610b3b565b915061097082610cf7565b604082019050919050565b6000610988602083610b3b565b915061099382610d46565b602082019050919050565b6109a781610b8a565b82525050565b60006020820190506109c260008301846108de565b92915050565b60006060820190506109dd60008301866108de565b6109ea602083018561099e565b81810360408301526109fc81846108fc565b9050949350505050565b6000602082019050610a1b60008301846108ed565b92915050565b60006020820190508181036000830152610a3b81846108fc565b905092915050565b60006040820190508181036000830152610a5d81856108fc565b90508181036020830152610a7181846108fc565b90509392505050565b60006020820190508181036000830152610a9381610935565b9050919050565b60006020820190508181036000830152610ab381610958565b9050919050565b60006020820190508181036000830152610ad38161097b565b9050919050565b6000610ae4610af5565b9050610af08282610c08565b919050565b6000604051905090565b600067ffffffffffffffff821115610b1a57610b19610c68565b5b610b2382610c97565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b6000610b5782610b6a565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610bc1578082015181840152602081019050610ba6565b83811115610bd0576000848401525b50505050565b60006002820490506001821680610bee57607f821691505b60208210811415610c0257610c01610c39565b5b50919050565b610c1182610c97565b810181811067ffffffffffffffff82111715610c3057610c2f610c68565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b7f53746f72652069732063757272656e746c79206e6f7420616363657074696e6760008201527f206f726465727321000000000000000000000000000000000000000000000000602082015250565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b610d7881610b4c565b8114610d8357600080fd5b5056fea2646970667358221220c93e91f8422e66d211f7a81db89befde0fc4c7fb3040677f7321cb607846c0e164736f6c634300080400334465706c6f79696e6720612053616c65737061676520636f6e74726163742077697468207469746c653a\",\n  \"deployedBytecode\": \"0x6080604052600436106100705760003560e01c80638da5cb5b1161004e5780638da5cb5b146100e5578063a7b7229414610110578063f2fde38b1461013b578063ff3c1a8f1461016457610070565b80635e1e100414610075578063715018a6146100b25780637bea1b78146100c9575b600080fd5b34801561008157600080fd5b5061009c60048036038101906100979190610874565b61018f565b6040516100a991906109ad565b60405180910390f35b3480156100be57600080fd5b506100c7610278565b005b6100e360048036038101906100de919061089d565b610300565b005b3480156100f157600080fd5b506100fa6103f6565b60405161010791906109ad565b60405180910390f35b34801561011c57600080fd5b5061012561041f565b6040516101329190610a06565b60405180910390f35b34801561014757600080fd5b50610162600480360381019061015d9190610874565b6104dc565b005b34801561017057600080fd5b506101796105d4565b6040516101869190610a21565b60405180910390f35b6000610199610702565b73ffffffffffffffffffffffffffffffffffffffff166101b76103f6565b73ffffffffffffffffffffffffffffffffffffffff161461020d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161020490610aba565b60405180910390fd5b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b610280610702565b73ffffffffffffffffffffffffffffffffffffffff1661029e6103f6565b73ffffffffffffffffffffffffffffffffffffffff16146102f4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102eb90610aba565b60405180910390fd5b6102fe600061070a565b565b600260149054906101000a900460ff1661034f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161034690610a9a565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f193505050501580156103b7573d6000803e3d6000fd5b507fb9037037fccac7d3b578a7164261dca7897caac8c04cc5ebd5063ffec69fe6a13334836040516103eb939291906109c8565b60405180910390a150565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000610429610702565b73ffffffffffffffffffffffffffffffffffffffff166104476103f6565b73ffffffffffffffffffffffffffffffffffffffff161461049d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161049490610aba565b60405180910390fd5b600260149054906101000a900460ff1615600260146101000a81548160ff021916908315150217905550600260149054906101000a900460ff16905090565b6104e4610702565b73ffffffffffffffffffffffffffffffffffffffff166105026103f6565b73ffffffffffffffffffffffffffffffffffffffff1614610558576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054f90610aba565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156105c8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105bf90610a7a565b60405180910390fd5b6105d18161070a565b50565b6060600180546105e390610bd6565b80601f016020809104026020016040519081016040528092919081815260200182805461060f90610bd6565b801561065c5780601f106106315761010080835404028352916020019161065c565b820191906000526020600020905b81548152906001019060200180831161063f57829003601f168201915b5050505050905090565b6106fe828260405160240161067c929190610a43565b6040516020818303038152906040527f4b5c4277000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506107ce565b5050565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b600061080a61080584610aff565b610ada565b90508281526020810184848401111561082257600080fd5b61082d848285610b94565b509392505050565b60008135905061084481610d6f565b92915050565b600082601f83011261085b57600080fd5b813561086b8482602086016107f7565b91505092915050565b60006020828403121561088657600080fd5b600061089484828501610835565b91505092915050565b6000602082840312156108af57600080fd5b600082013567ffffffffffffffff8111156108c957600080fd5b6108d58482850161084a565b91505092915050565b6108e781610b4c565b82525050565b6108f681610b5e565b82525050565b600061090782610b30565b6109118185610b3b565b9350610921818560208601610ba3565b61092a81610c97565b840191505092915050565b6000610942602683610b3b565b915061094d82610ca8565b604082019050919050565b6000610965602883610b3b565b915061097082610cf7565b604082019050919050565b6000610988602083610b3b565b915061099382610d46565b602082019050919050565b6109a781610b8a565b82525050565b60006020820190506109c260008301846108de565b92915050565b60006060820190506109dd60008301866108de565b6109ea602083018561099e565b81810360408301526109fc81846108fc565b9050949350505050565b6000602082019050610a1b60008301846108ed565b92915050565b60006020820190508181036000830152610a3b81846108fc565b905092915050565b60006040820190508181036000830152610a5d81856108fc565b90508181036020830152610a7181846108fc565b90509392505050565b60006020820190508181036000830152610a9381610935565b9050919050565b60006020820190508181036000830152610ab381610958565b9050919050565b60006020820190508181036000830152610ad38161097b565b9050919050565b6000610ae4610af5565b9050610af08282610c08565b919050565b6000604051905090565b600067ffffffffffffffff821115610b1a57610b19610c68565b5b610b2382610c97565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b6000610b5782610b6a565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610bc1578082015181840152602081019050610ba6565b83811115610bd0576000848401525b50505050565b60006002820490506001821680610bee57607f821691505b60208210811415610c0257610c01610c39565b5b50919050565b610c1182610c97565b810181811067ffffffffffffffff82111715610c3057610c2f610c68565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b7f53746f72652069732063757272656e746c79206e6f7420616363657074696e6760008201527f206f726465727321000000000000000000000000000000000000000000000000602082015250565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b610d7881610b4c565b8114610d8357600080fd5b5056fea2646970667358221220c93e91f8422e66d211f7a81db89befde0fc4c7fb3040677f7321cb607846c0e164736f6c63430008040033\",\n  \"linkReferences\": {},\n  \"deployedLinkReferences\": {}\n}\n","import { ethers } from \"ethers\";\nimport { createItemString } from \"../util\";\nimport { SALESPAGE_CONTRACT } from \"./metadata\";\n\n\n// https://dapp-world.com/smartbook/how-to-use-ethers-with-polygon-k5Hn\nexport async function deployContract(provider, title, signerAddress) {\n\n  //   https://dev.to/yosi/deploy-a-smart-contract-with-ethersjs-28no\n\n  // Create an instance of a Contract Factory\n  const factory = new ethers.ContractFactory(\n    SALESPAGE_CONTRACT.abi,\n    SALESPAGE_CONTRACT.bytecode,\n    provider.getSigner()\n  );\n\n  const validatedAddress = ethers.utils.getAddress(signerAddress);\n\n  // Start deployment, returning a promise that resolves to a contract object\n  const contract = await factory.deploy(title, validatedAddress);\n  await contract.deployed();\n  console.log(\"Contract deployed to address:\", contract.address);\n  return contract;\n}\n\nexport const validAddress = (addr) => {\n  try {\n    ethers.utils.getAddress(addr);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nexport const completePurchase = async (provider, contractAddress, pageId, items, amountEth) => {\n  if (!contractAddress || !items) {\n    return {};\n  }\n\n  const salespageContract = new ethers.Contract(\n    contractAddress,\n    SALESPAGE_CONTRACT.abi,\n    provider.getSigner()\n  );\n\n  const itemString = createItemString(items)\n  const value =  ethers.utils.parseEther(amountEth.toString())\n  console.log('complete purchase', itemString, value, pageId, contractAddress, amountEth)\n  const options = {value}\n  const result = await salespageContract.completePurchase(itemString, options);\n  return result;\n};\n","import { Input, Empty} from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { bytesToSize, isEmpty } from \"../../util\";\n\nconst thumbsContainer = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\",\n  marginTop: 16,\n};\n\nconst thumb = {\n  display: \"inline-flex\",\n  borderRadius: 2,\n  border: \"1px solid #eaeaea\",\n  marginBottom: 8,\n  marginRight: 8,\n  borderRadius: '5px',\n  width: 400,\n  textAlign: \"left\",\n  height: 230,\n  overflow: \"hidden\",\n  padding: 4,\n  paddingTop: 8,\n  boxSizing: \"border-box\",\n};\n\nconst thumbInner = {\n  display: \"flex\",\n  minWidth: 0,\n  overflow: \"hidden\",\n};\n\nconst img = {\n  display: \"block\",\n  width: \"auto\",\n  height: \"100%\",\n};\n\nexport function FileDropzone({ files, setFiles, updateInfo, info }) {\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop: acceptedFiles => {\n      console.log(\"files\", acceptedFiles);\n      setFiles(\n        acceptedFiles.map(file =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          }),\n        ),\n      );\n    },\n  });\n\n  const thumbs = files.map(file => {\n    const fileInfo = info[file.name] || {};\n    const updateFileInfo = (key, value) => {\n      updateInfo(file.name, {...fileInfo, [key]: value });\n    };\n    return (\n      <div style={thumb} key={file.name}>\n        <div style={thumbInner}>\n          <p>\n            <img src={file.preview} className=\"preview-image\" />\n            <b>{file.name}</b>\n            <br />\n            {file.size && (\n              <span>\n                Size: {bytesToSize(file.size)}\n                <br />\n              </span>\n            )}\n            {file.type && <span>Type: {file.type}</span>}\n\n            <Input\n              addonBefore={\"Name: \"}\n              placeholder=\"Enter item name\"\n              value={fileInfo['name']}\n              onChange={e => updateFileInfo('name', e.target.value)}\n            />\n            <Input\n              addonBefore={\"Description: \"}\n              placeholder=\"Enter description\"\n              value={fileInfo['description']}\n              onChange={e => updateFileInfo('description', e.target.value)}\n            />\n            <Input\n              addonBefore={\"Price (USD): \"}\n              placeholder=\"Enter decimal price in USD\"\n              value={fileInfo['usd']}\n              onChange={e => updateFileInfo('usd', e.target.value)}\n            />\n          </p>\n        </div>\n      </div>\n    );\n  });\n\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      files.forEach(file => URL.revokeObjectURL(file.preview));\n    },\n    [files],\n  );\n\n  const noFiles = isEmpty(files)\n\n  return (\n    <section>\n      <div {...getRootProps({ className: \"dropzone\" })}>\n        <input {...getInputProps()} />\n        <p>Drag 'n' drop some files here, or click to select files</p>\n      </div>\n      <br/>\n      {!noFiles && <h3>Items</h3>}\n      {noFiles && <div>\n        <Empty\n          image=\"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg\"\n          imageStyle={{\n            height: 60,\n          }}\n          description={<span><h4>No items!</h4>Get started by uploading an image of your first item.</span>}\n      /></div>}\n      <aside style={thumbsContainer}>{thumbs}</aside>\n    </section>\n  );\n}","import { ThreeIdConnect, EthereumAuthProvider } from \"@3id/connect\";\nimport KeyDidResolver from \"key-did-resolver\";\nimport ThreeIdResolver from \"@ceramicnetwork/3id-did-resolver\";\nimport { TileDocument } from \"@ceramicnetwork/stream-tile\";\nimport { CeramicClient } from '@ceramicnetwork/http-client'\nimport { DID } from \"dids\";\n\n// https://developers.ceramic.network/run/nodes/community-nodes/\nconst TEST_API_URL = \"https://gateway-clay.ceramic.network\";\nconst ceramic = new CeramicClient(TEST_API_URL);\n\n// https://developers.ceramic.network/build/javascript/http/\n\nconst resolver = { ...KeyDidResolver.getResolver(), ...ThreeIdResolver.getResolver(ceramic) };\nconst did = new DID({ resolver });\n\nceramic.did = did;\n\nconst threeIdConnect = new ThreeIdConnect();\n\nexport const initCeramic = async address => {\n  console.log(\"initCeramic\", address);\n  // https://developers.ceramic.network/authentication/3id-did/3id-connect/#installation\n  const authProvider = new EthereumAuthProvider(window.ethereum, address);\n  await threeIdConnect.connect(authProvider);\n\n  const provider = await threeIdConnect.getDidProvider();\n  ceramic.did.setProvider(provider);\n\n  await ceramic.did.authenticate();\n};\n\n// TODO: add stream query methods for storing storefront metadata with IPFS resources.\n// https://developers.ceramic.network/build/javascript/quick-start/\n\nexport const createStream = async data => {\n  // data: JSON payload data\n  const doc = await TileDocument.create(ceramic, data);\n\n  const streamId = doc.id.toString();\n  console.log(\"create\", streamId, doc.content);\n  return streamId;\n};\n\nexport const loadStream = async streamId => {\n  // Stream id: identifier for the stream (using cid or stream identifier).\n\n  const doc = await TileDocument.load(ceramic, streamId);\n\n  console.log(doc.content);\n  return doc.content;\n};\n\n// TODO: update stream.","export default __webpack_public_path__ + \"static/media/logo.5c39ba33.png\";","import React, { useState } from \"react\";\nimport { Button, Input, Row, Col, Radio, Steps, Result } from \"antd\";\nimport TextArea from \"antd/lib/input/TextArea\";\nimport { salespageUrl, ipfsUrl, getExplorerUrl } from \"../util\";\nimport { APP_NAME, EXAMPLE_FORM, SALESPAGE_DETAIL } from \"../util/constants\";\nimport { storeFiles } from \"../util/stor\";\nimport { deployContract, validAddress } from \"../contract/deploy\";\nimport { FileDropzone } from \"./FileDropzone/FileDropzone\";\nimport { createStream } from \"../util/ceramic\";\nimport logo from '../assets/logo.png'\n\nconst { Step } = Steps;\n\nfunction CreateSalespage({provider}) {\n  const [data, setData] = useState({ ...EXAMPLE_FORM });\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState();\n\n  const updateData = (key, value) => {\n    setData({ ...data, [key]: value });\n  };\n\n  const isValid = (data) => {\n    return (\n      data.title &&\n      data.files.length > 0 &&\n      validAddress(data.paymentAddress)\n    );\n  };\n  const isValidData = isValid(data);\n\n  const create = async () => {\n    setError(undefined);\n\n    if (!isValidData) {\n      setError(\n        \"Please provide a store name, valid address, and at least one file.\"\n      );\n      return;\n    }\n\n    setLoading(true);\n    const body = { ...data };\n\n    // Format files for upload.\n    const files = body.files.map((x) => {\n      return x;\n    });\n\n    let res = { ...data };\n\n    try {\n      // 1) deploy base contract with metadata,\n      const contract = await deployContract(provider, data.title, data.paymentAddress);\n      res[\"address\"] = contract.address\n      res[\"files\"] = files.map(f => f.path)\n\n      // 2) Create stream\n      const streamId = await createStream(res);\n      res['streamId'] = streamId;\n\n      const blob = new Blob([JSON.stringify({streamId})], { type: 'application/json' })\n      const metadataFile = new File([blob], 'metadata.json')\n      const allFiles = [...files, metadataFile]\n\n      // 3) Upload files to ipfs,\n      const cid = await storeFiles(allFiles);\n      res['cid'] = cid;\n\n      // 4) return shareable url.\n      res[\"salespageUrl\"] = salespageUrl(cid); // Could use stream or cid.\n      res[\"contractUrl\"] = getExplorerUrl(res.address);\n\n      // Result rendered after successful doc upload + contract creation.\n      setResult(res);\n      try {\n        // await postPacket(res.salespage request);\n      } catch (e) {\n        console.error(\"error posting salespage request\", e);\n      }\n    } catch (e) {\n      console.error(\"error creating salespage request\", e);\n      setError(e.message || e.toString())\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStep = () => {\n    if (!!result) {\n      return 2;\n    } else if (isValidData) {\n      return 1;\n    }\n    return 0;\n  };\n\n  return (\n    <div>\n      <Row>\n        <Col span={24}>\n        <div>\n          <div className=\"centered create-detail\">\n            <img src={logo} className='create-logo'/>\n            <h1 className=\"centered\">Create Salespage</h1>\n            <p>{SALESPAGE_DETAIL}</p>\n  </div>\n          <br/>\n          <br/>\n            <Steps\n              className=\"standard-margin\"\n              direction=\"horizontal\"\n              size=\"small\"\n              current={getStep()}\n            >\n              <Step title=\"Fill in fields\" description=\"Enter required data.\" />\n              <Step\n                title=\"Create salespage\"\n                description=\"Requires authorizing a create Salespage contract transaction.\"\n              />\n              <Step\n                title=\"Done\"\n                description=\"Your salespage will be live for others to view and complete purchases.\"\n              />\n            </Steps>\n          </div>\n          <br/>\n        </Col>\n      </Row>\n      <Row>\n        \n        <Col span={24}>\n       \n          {!result && <div className=\"create-form white boxed\">\n\n            {/* <h2>Create new salespage request</h2> */}\n            <br />\n\n            <h3 className=\"vertical-margin\">Store name:</h3>\n            <Input\n              placeholder=\"Name of the Salespage\"\n              value={data.title}\n              prefix=\"Name: \"\n              onChange={(e) => updateData(\"name\", e.target.value)}\n            />\n            {/* <TextArea\n              aria-label=\"Description\"\n              onChange={(e) => updateData(\"description\", e.target.value)}\n              placeholder=\"Description of the salespage request\"\n              prefix=\"Description\"\n              value={data.description}\n            /> */}\n\n            {/* TODO: add configurable amount of items */}\n            <h3 className=\"vertical-margin\">Declare products:</h3>\n            <FileDropzone\n              info={data}\n              updateInfo={updateData}\n              files={data.files}\n              setFiles={(files) => updateData(\"files\", files)}\n            />\n\n            <h3 className=\"vertical-margin\">Enter payment address:</h3>\n            <p>\n              Enter payment address for this {APP_NAME}. Defaults to current address.\n            </p>\n            <Input\n              placeholder=\"Payment address\"\n              value={data.paymentAddress}\n              prefix=\"Payment Address: \"\n              onChange={(e) => updateData(\"paymentAddress\", e.target.value)}\n            />\n            <br />\n\n            <Button\n              type=\"primary\"\n              className=\"standard-button\"\n              onClick={create}\n              disabled={loading} // || !isValidData}\n              loading={loading}\n            >\n              Create {APP_NAME}!\n            </Button>\n            {!error && !result && loading && (\n              <span>&nbsp;Note this may take a few moments.</span>\n            )}\n            {error && <div className=\"error-text\">{error}</div>}\n            </div>}\n            {result && (\n              <div>\n                {/* https://ant.design/components/result/ */}\n                <Result\n                  status=\"success\"\n                  title={`Created ${APP_NAME}`}\n                  subTitle=\"See below for information\"\n                  extra={[\n                    <Button href={result.salespageUrl} type=\"primary\" key=\"console\">\n                      Open {APP_NAME}\n                    </Button>,\n                    <Button href={ipfsUrl(result.cid)} key=\"metadata\">View metadata</Button>,\n                    <Button href={result.contractUrl} key=\"contract\">View contract</Button>,\n                  ]}\n                />\n              </div>\n            )}\n        </Col>\n        <Col span={1}></Col>\n        <Col span={7}>\n          \n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nCreateSalespage.propTypes = {};\n\nexport default CreateSalespage;\n","import axios from \"axios\";\nimport { COVALENT_KEY } from \"./constants\";\n\n// Fetch transactions against a given Salespage owner address (measures activity).\nexport const getTransactions = (chainId, address) => {\n  const url = `https://api.covalenthq.com/v1/${chainId}/address/${address}/transactions_v2/?&key=${COVALENT_KEY}`;\n  return axios.get(url);\n};\n\n// Fetch historic balances for a given Salespage owner address (measures performance).\nexport const getBalances = (chainId, address) => {\n  const url = `https://api.covalenthq.com/v1/${chainId}/address/${address}/portfolio_v2/?&key=${COVALENT_KEY}`;\n  return axios.get(url);\n}","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Input, Select, Table } from \"antd\";\nimport { ACTIVE_CHAIN, APP_NAME, CHAIN_OPTIONS } from \"../util/constants\";\nimport { getTransactions } from \"../util/covalent\";\nimport { capitalize, getHistoryColumns, HISTORY_COLUMNS} from \"../util\";\n\nimport logo from '../assets/logo.png'\n\nconst { Option } = Select;\n\n\nfunction History(props) {\n  const [address, setAddress] = useState(\n    \"0xD7e02fB8A60E78071D69ded9Eb1b89E372EE2292\"\n  );\n  const [chainId, setChainId] = useState(ACTIVE_CHAIN.id + \"\");\n  const [loading, setLoading] = useState();\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    setData(undefined)\n  }, [chainId])\n\n  const fetchHistory = async () => {\n    if (!address || !chainId) {\n      alert(\"Address and chainId are required\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const res = await getTransactions(chainId, address);\n      setData(res.data.data.items);\n    } catch (e) {\n      console.error(e);\n      alert(\"error getting signdata\" + e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const currentChain = CHAIN_OPTIONS[chainId];\n  const cols = getHistoryColumns(address);\n\n  return (\n    <div>\n      <div align='center'>\n        <img className=\"history-logo\" src={logo}/>\n        <p>\n          This page can be used to lookup {APP_NAME} transactions given a store owner address\n          on <b>{currentChain.name}</b>.\n        </p>\n        <br/>\n        <br/>\n      </div>\n      <Input\n        value={address}\n        onChange={(e) => setAddress(e.target.value)}\n        prefix=\"Address\"\n      ></Input>\n      <br />\n      <p></p>\n      <Select\n        defaultValue={chainId}\n        style={{ width: 120 }}\n        onChange={(v) => setChainId(v)}\n      >\n        {Object.keys(CHAIN_OPTIONS).map((cId, i) => {\n          return (\n            <Option key={i} value={cId}>\n              {capitalize(CHAIN_OPTIONS[cId].name)}\n            </Option>\n          );\n        })}\n      </Select>\n      &nbsp;\n      <Button onClick={fetchHistory} disabled={loading} loading={loading}>\n        View transactions\n      </Button>\n      <br />\n      <hr />\n      {data && (\n        <div>\n          <h1>Transaction History</h1>\n          <Table\n            dataSource={data.filter(d => d.value > 0)}\n            columns={cols}\n            className=\"pointer\"\n            onRow={(record, rowIndex) => {\n              return {\n                onClick: (event) => {\n                  console.log(\"event\", event.target.value);\n                  window.open(\n                    `${currentChain.url}tx/${record.tx_hash}`,\n                    \"_blank\"\n                  );\n                }, // click row\n                onDoubleClick: (event) => {}, // double click row\n                onContextMenu: (event) => {}, // right button click row\n                onMouseEnter: (event) => {}, // mouse enter row\n                onMouseLeave: (event) => {}, // mouse leave row\n              };\n            }}\n          />\n          ;\n        </div>\n      )}\n    </div>\n  );\n}\n\nHistory.propTypes = {};\n\nexport default History;","import WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Web3Modal from \"web3modal\";\nimport { INFURA_ID } from \"./constants\";\n\nconst providerOptions = {\n    walletconnect: {\n        package: WalletConnectProvider, // required\n        options: {\n          bridge: \"https://polygon.bridge.walletconnect.org\",\n          infuraId: INFURA_ID,\n          rpc: {\n            10: \"https://mainnet.optimism.io\", // xDai\n            100: \"https://rpc.gnosischain.com\", // xDai\n            137: \"https://polygon-rpc.com\",\n            31337: \"http://localhost:8545\",\n            42161: \"https://arb1.arbitrum.io/rpc\",\n            80001: \"https://rpc-mumbai.maticvigil.com\",\n            71401: \"https://godwoken-testnet-v1.ckbapp.dev\",\n          },\n        },\n      },\n};\n\nexport const web3ModalSetup = () =>\n  new Web3Modal({\n    network: \"mainnet\", // Optional. If using WalletConnect on xDai, change network to \"xdai\" and add RPC info below for xDai chain.\n    cacheProvider: true, // optional\n    theme: \"light\", // optional. Change to \"dark\" for a dark theme.\n    providerOptions\n  })\n\n\n","export default __webpack_public_path__ + \"static/media/icon.b53b9bd2.png\";","import axios from \"axios\"\n\n// {\n//     \"BTC\": 0.05556,\n//     \"USD\": 1159.16,\n//     \"EUR\": 1138.07\n// }\nexport function getRates() {\n    const url = 'https://min-api.cryptocompare.com/data/price?fsym=USD&tsyms=BTC,ETH,EUR,MATIC'\n    return axios.get(url)\n}\n","import { CheckCircleTwoTone } from \"@ant-design/icons\";\nimport { Button, Tooltip, Modal, Input, Result } from \"antd\";\nimport React, { useState, useMemo, useEffect } from \"react\";\nimport logo from \"../../assets/logo.png\";\nimport { abbreviate, formatMoney, getDateStringFromTimestamp } from \"../../util\";\nimport { getRates } from \"../../util/coins\";\nimport { ACTIVE_CHAIN, APP_NAME } from \"../../util/constants\";\n\nimport \"./Invoice.css\";\n\nconst IMG_WIDTH = \"200px\";\n\nconst DEMO_NUMBER =\n  Date.now().toString(36) + Math.random().toString(36).substring(2);\n\n// github.com/sparksuite/simple-html-invoice-template\nfunction Invoice({\n  storeName,\n  address,\n  paymentAddress,\n  paid,\n  ref,\n  createdAt,\n  logoUrl,\n  pay,\n  items=[],\n  invoiceNumber=DEMO_NUMBER,\n}) {\n  const [rates, setRates] = useState()\n\n  const total = useMemo(() => items \n    .map((item) => item.usd * (item.quantity || 1))\n    .reduce(function (a, b) {\n      return a + b;\n    }, 0), [items])\n\n\n  async function fetchRates() {\n    try {\n      const {data} = await getRates()\n      setRates(data)\n      console.log('rates', data)\n    } catch (e) {\n      console.error('err getting rates', e)\n    }\n  }\n\n  useEffect(() => {\n    fetchRates() \n  }, [])\n\n  const amountString = `${formatMoney(total)} USD`\n  const ethString = rates && total*rates.MATIC\n\n  return (\n    <div className=\"invoice-box\" ref={ref}>\n      {/* <p>\n        <b>Transaction Complete! Please print this page.</b>\n      </p> */}\n      <table cellPadding=\"0\" cellSpacing=\"0\">\n        <tbody>\n          <tr className=\"top\">\n            <td colSpan=\"2\">\n              <table>\n                <tr>\n                  <td className=\"title\">\n                    <img\n                      src={logoUrl || logo}\n                      style={{ width: \"100%\", maxWidth: IMG_WIDTH }}\n                    />\n                  </td>\n\n                  <td>\n                    Purchase #:&nbsp;\n                    <Tooltip\n                      placement=\"top\"\n                      title={<span>{invoiceNumber}</span>}\n                    >\n                      {invoiceNumber.slice(0, 16)}\n                    </Tooltip>\n                    <br />\n                    Created:&nbsp;\n                    {getDateStringFromTimestamp(createdAt || Date.now(), true)}\n                    <br />\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n\n          <tr className=\"information\">\n            <td colSpan=\"2\">\n              <table>\n                <tr>\n                  <td>\n                    {storeName && <span><b>{storeName}</b><br/></span>}\n                    Fulfilled by {APP_NAME}, Inc.\n                    <br />\n                    {/* 12345 Sunny Road */}\n                  </td>\n\n                  <td>\n                    Your account: {abbreviate(address)}<br/>\n                    Payable to: {abbreviate(paymentAddress)}\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n\n    \n          <tr className=\"heading\">\n            <td>Item</td>\n            <td>Price</td>\n            <td>Quantity</td>\n          </tr>\n\n          {items.map(({ name: itemName, usd, quantity }, i) => (\n            <tr className=\"item\" key={i}>\n              <td>{itemName}</td>\n              <td>{formatMoney(usd)}</td>\n              <td>\n                {quantity}\n              </td>\n            </tr>\n          ))}\n\n          <br/>\n\n        <tr className=\"heading\">\n            <td>Payment Method</td>\n            <td>Check #</td>\n          </tr>\n\n          <tr className=\"details\">\n            <td>USD</td>\n\n            <td>\n              {/* {payId} */}\n              {amountString}<br/>\n              {ethString?.toFixed(4)} MATIC ({ACTIVE_CHAIN.name})\n            </td>\n          </tr>\n\n\n          <tr className=\"total\">\n            <td>\n              {/* <a href={url} target=\"_blank\">\n              View NFT\n            </a> */}\n              <br />\n              <br />\n              {!paid && <span>\n                <Button\n                  type=\"primary\"\n                  size=\"large\"\n                  className=\"standard-button\"\n                  onClick={() => pay(items, ethString)}\n                >\n                  Pay with wallet\n                </Button>\n              </span>}\n              {paid && <div>\n                <CheckCircleTwoTone twoToneColor=\"#00aa00\" />\n                  &nbsp;\n                  Paid\n              </div>}\n            </td>\n\n            <td>Total: {amountString}</td>\n          </tr>\n        </tbody>\n      </table>\n     \n    </div>\n  );\n}\n\nexport default Invoice;\n","import axios from \"axios\";\nimport { NFT_PORT_KEY } from \"./constants\";\n\nasync function loadImage(url) {\n  const config = { url, method: \"get\", responseType: \"blob\" }\n  const response = await axios.request(config)\n  return response.data // the blob\n}\n\nexport const createReceiptNft = async (\n  name,\n  description,\n  ownerAddress,\n  imageUrl\n) => {\n  if (!NFT_PORT_KEY) {\n    return {}\n  }\n  const params = {\n    chain: \"polygon\",\n    mint_to_address: ownerAddress,\n    description,\n    name,\n  };\n\n  const formData = new FormData();\n  // Default to celebration image nft\n  const url = imageUrl || 'https://upload.wikimedia.org/wikipedia/commons/c/c6/Celebration_fireworks.jpg'\n  \n  // https://stackoverflow.com/questions/6850276/how-to-convert-dataurl-to-file-object-in-javascript\n  const blob = await loadImage(url)\n  const file = new File([blob], \"receipt.jpg\", {\n    type: \"image/jpeg\",\n    lastModified: new Date(),\n  });\n  // const f = createJsonFile(data, \"metadata.json\");\n  formData.append(\"file\", file, file.name);\n\n  var options = {\n    method: \"POST\",\n    url: 'https://api.nftport.xyz/v0/files',\n    params,\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n      Authorization: NFT_PORT_KEY,\n      \"content-type\":\n        \"multipart/form-data; boundary=---011000010111000001101001\",\n    },\n    data: formData,\n  };\n\n  return axios.request(options);\n};\n\nexport const getMintedNFT = (txHash) => {\n  var options = {\n    method: \"GET\",\n    url: \"https://api.nftport.xyz/v0/mints/\" + txHash,\n    params: { chain: \"polygon\" },\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: NFT_PORT_KEY,\n    },\n  };\n\n  return axios.request(options);\n};\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { Button, Card, Col, Empty, Input, Modal, Result, Row, Spin, Tooltip } from \"antd\";\nimport { useParams } from \"react-router-dom\";\nimport { fetchMetadata, retrieveFiles } from \"../util/stor\";\nimport { formatMoney, getExplorerUrl, ipfsUrl, isEmpty } from \"../util\";\nimport { APP_NAME, DEMO_ITEMS } from \"../util/constants\";\nimport { completePurchase } from \"../contract/deploy\";\nimport { InfoCircleOutlined, MinusCircleFilled, PlusCircleFilled } from \"@ant-design/icons\";\nimport salespageLogo from '../assets/icon.png'\nimport Meta from \"antd/lib/card/Meta\";\nimport Invoice from \"./Invoice/Invoice\";\nimport { loadStream } from \"../util/ceramic\";\nimport { createReceiptNft } from \"../util/nftport\";\n\nfunction Salespage({ account, provider, login, logout }) {\n  const { pageId } = useParams(); // cid\n  const [data, setData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [cartItems, setCartItems] = useState({})\n  const [result, setResult] = useState();\n  const [modifierText, setModifierText] = useState()\n  const [activeItem, setActiveItem] = useState()\n  const [showInvoice, setShowInvoice] = useState()\n  const [error, setError] = useState()\n\n  const fetchData = async () => {\n    console.log(\"fetch\", pageId);\n    if (!pageId) {\n      return;\n    }\n\n    setLoading(true);\n    let res;\n\n    try {\n      // TODO: replace with ceramic stream id lookup.\n      res = await fetchMetadata(pageId);\n      const { streamId } = res.data\n\n      const streamData = await loadStream(streamId);\n      console.log(\"salespage request\", streamData);\n      setData({streamId, ...streamData})\n    } catch (e) {\n      console.error(e);\n      // alert(\"error getting salespage data\" + e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateModifier = (item, modifier) => {\n    cartItems[item.name].modifier = modifier\n    setCartItems({...cartItems})\n    setActiveItem(undefined)\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [pageId]);\n\n  const { description, title, paymentAddress, address: contractAddress } = data;\n\n  const completePayment = async (itemsToPurchase, amountEth) => {\n    setError('')\n    if (!provider || !account) {\n      return await login(false)\n    }\n\n    console.log('completePayment', amountEth)\n    let nftResults = {};\n    let res;\n\n    setLoading(true);\n\n    try {\n      //   https://docs.nftport.xyz/docs/nftport/b3A6MjE2NjM5MDM-easy-minting-w-url\n\n      res = await completePurchase(provider, contractAddress, pageId, itemsToPurchase, amountEth);\n      nftResults = await createReceiptNft(\n        title,\n        description,\n        account,\n      );\n      res[\"signatureNft\"] = nftResults.data || {}\n      console.log('result', res)\n      setResult(res);\n      logout()\n    } catch (e) {\n      console.error(\"error checking out\", e);\n      // alert(\"Error completing salespage: \" + JSON.stringify(e));\n      setError(e.message || e.toString())\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const modifyQuantity = (item, amount) => {\n    if (!amount) {\n      return\n    }\n    const existing = cartItems[item.name]\n    if (!existing) {\n      item.quantity = 0\n      cartItems[item.name] = item\n    }\n    cartItems[item.name].quantity += amount\n    if (cartItems[item.name].quantity <= 0) {\n      delete cartItems[item.name]\n    }\n    setCartItems({...cartItems})\n  }\n\n  const items = useMemo(() => {\n    if (data.files) {\n      return data.files.map((name, i) => {\n        const d = data[name]\n        return {\n          ...d,\n          // TODO: get ipfs url\n          imgUrl: ipfsUrl(pageId, name)\n        }\n      })\n\n    }\n    return []// DEMO_ITEMS\n  }, [data]);\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n\n  const pageTitle = title || `${APP_NAME} checkout`;\n  const activeItems = Object.values(cartItems);\n  const noItems = isEmpty(activeItems);\n\n  if (showInvoice) {\n    return <div className=\"container boxed white\">\n      {result && <div>\n       <Result\n          status=\"success\" \n          title=\"Transaction complete!\" \n          subTitle=\"Present this page as proof of payment\"\n          extra={[\n            // <Button href={trans} type=\"primary\" key=\"console\">\n            //   View transaction\n            // </Button>\n          ]}\n        >\n\n          \n          {JSON.stringify(result)}\n        </Result>\n      </div>}\n    <Invoice \n        storeName={pageTitle}\n        address={account}\n        paymentAddress={paymentAddress}\n    paid={!!result} name={data.pageTitle} items={activeItems} pay={completePayment}/>\n    <br/>\n    {error && <p className=\"centered standard-button error-text\">Error completing purchase - {error}</p>}\n  </div>\n  }\n\n  return (<>\n      <div className=\"centered salespage-header\">\n          <img src={data.storeLogo || salespageLogo} className='page-logo'/>\n          <h2 className=\"centered\">{pageTitle}</h2>\n          <div>Purchase Page<br/>Add items to cart. Complete payment and get a proof of purchase receipt sent to your wallet.</div>\n      </div>\n\n    <div className=\"container boxed white\">\n      <Row>\n        <Col span={7}>\n          <Card title=\"Your items\">\n          {noItems && <Empty \n          image=\"https://cdn-icons-png.flaticon.com/512/34/34627.png\"\n          imageStyle={{\n            height: 60,\n          }}\n          description=\"No items in cart\">\n            Click an item on the right to get started!\n            </Empty>}\n          {activeItems.map((item, i) => {\n            return <div className=\"itemrow\">\n              {item.name}&nbsp;<Tooltip title=\"Add modifier to item\">\n                  <InfoCircleOutlined className=\"pointer\" onClick={() => setActiveItem(item)}/>\n                </Tooltip>\n              <span className=\"float-right bold\">\n              x{item.quantity}\n              </span>\n              {item.modifier && <span>\n                <br/>  \n                {item.modifier}\n              </span>}\n            </div>\n          })}\n            {!noItems && <div className=\"checkout-area\">\n            <Button className=\"standard-button\" type=\"primary\" onClick={() => setShowInvoice(true)}>Go to checkout</Button>\n          </div>}\n</Card>\n      \n        </Col>\n      <Col span={17}>\n      {items.map((item, i) => {\n        const imgUrl = item.imgUrl || \"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png\";\n        return <Card\n        className=\"item-card\"\n        // style={{ width: 300 }}\n        cover={\n          <img\n            className=\"item-card-image\"\n            alt={item.name}\n            src={imgUrl}\n          />\n        }\n        actions={[\n          <MinusCircleFilled key=\"minus\" onClick={() => modifyQuantity(item, -1)} />,\n          <PlusCircleFilled key=\"plus\" onClick={() => modifyQuantity(item, 1)} />,\n        ]}\n      >\n        <Meta\n          title={item.name || 'Item title'}\n          description={`${item.description || 'No description'}. ${formatMoney(item.usd)}`}\n        />\n      </Card>\n      })}\n\n      </Col>\n      </Row>\n\n      <Modal title={\"Add modifier to \" + activeItem?.name} visible={!!activeItem} okText=\"Save\" onCancel={() => setActiveItem(undefined)} onOk={() => updateModifier(activeItem, modifierText)}>\n        <Input\n          value={modifierText}\n          prefix={'Add request: '}\n          onChange={e => setModifierText(e.target.value)}\n          />\n      </Modal>\n    </div>\n  </>\n  );\n}\n\nSalespage.propTypes = {};\n\nexport default Salespage;\n","import React, { useEffect, useState } from \"react\";\n\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\n\nimport Home from \"./components/Home\";\nimport CreateSalespage from \"./components/CreateSalespage\";\nimport { Layout, Menu, Breadcrumb, Button } from \"antd\";\nimport { ACTIVE_CHAIN, APP_DESC, APP_NAME, CONNECT_PROMPT } from \"./util/constants\";\nimport History from \"./components/History\";\nimport logo from \"./assets/logo.png\";\n\nimport \"./App.css\";\nimport { web3ModalSetup } from \"./util/web3util\";\nimport Salespage from \"./components/Salespage\";\nimport { ethers } from \"ethers\";\nimport { abbreviate } from \"./util\";\nimport { initCeramic } from \"./util/ceramic\";\n\nconst { Header, Content, Footer } = Layout;\n\nexport const web3Modal = web3ModalSetup()\n\nfunction App() {\n  const [account, setAccount] = useState();\n  const [provider, setProvider] = useState();\n  const [loading ,setLoading] = useState(false);\n\n  async function login(checkOnInit) {\n    if (checkOnInit && !web3Modal.cachedProvider) {\n      // Don't force login if no cached provider.\n      return\n    }\n    try {\n      const instance = await web3Modal.connect();\n      const p = new ethers.providers.Web3Provider(instance);\n      setProvider(p)\n      const accounts = await p.listAccounts()\n      const addr = accounts[0]\n      setAccount(addr)\n      await initCeramic(addr)\n    }  catch (e) {\n      console.error('login error', e)\n      alert(e)\n    }\n  }\n\n  const logout = () => {\n    web3Modal.clearCachedProvider()\n    setAccount(undefined)\n    setProvider(undefined)\n  }\n\n  useEffect(() => {\n    login(true)\n  }, [])\n\n  const navigate = useNavigate();\n  const path = window.location.pathname;\n\n  const isCheckout = path.startsWith(\"/page\");\n\n  return (\n    <div className=\"App\">\n      <Layout className=\"layout\">\n        {!isCheckout && <Header>\n          {/* <div className=\"logo\" /> */}\n          <Menu\n            // theme=\"dark\"\n            mode=\"horizontal\"\n            defaultSelectedKeys={[]}\n          >\n            <Menu.Item key={0}>\n              <img\n                src={logo}\n                className=\"header-logo pointer\"\n                onClick={() => navigate(\"/\")}\n              />\n            </Menu.Item>\n\n            {!isCheckout && (\n              <>\n                <Menu.Item key={1} onClick={() => navigate(\"/create\")}>\n                  Create salespage request\n                </Menu.Item>\n                <Menu.Item key={2} onClick={() => navigate(\"/history\")}>\n                  View Transactions\n                </Menu.Item>\n              </>\n            )}\n            {!account && <span>\n              <Button type=\"primary\" onClick={() => login(false)}  loading={loading} disabled={loading}>{CONNECT_PROMPT}</Button>\n            </span> }\n            {account && <span><b>\n              Hello: {abbreviate(account)}</b>&nbsp;(<a href=\"#\" onClick={e => {\n                e.preventDefault()\n                logout()\n              }}>logout</a>)</span>}\n          &nbsp;\n          <Menu.Item>\n            <b>Network: {ACTIVE_CHAIN.name}</b>\n            </Menu.Item>\n          </Menu>\n        </Header>}\n        <Content style={{ padding: \"0 50px\" }}>\n          <div className={`${!isCheckout ? \"container\" : \"\"}`}>\n            <Routes>\n              <Route path=\"/\" element={<Home account={account} />} />\n              <Route path=\"/page/:pageId\" element={<Salespage logout={logout} login={login} provider={provider} account={account} />} />\n              <Route path=\"/create\" element={<CreateSalespage provider={provider} account={account}/>} />\n              <Route path=\"/history\" element={<History />} />\n            </Routes>\n          </div>\n        </Content>\n        <Footer style={{ textAlign: \"center\" }}>\n          {APP_NAME} 2022 - {APP_DESC}\n        </Footer>\n      </Layout>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}